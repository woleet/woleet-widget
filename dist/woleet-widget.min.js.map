{"version":3,"sources":["woleet-widget.js"],"names":["root","Widget","hash","params","content","info","dropZone","$touch","text","mainTextZone","subTextZone","tooltip","inputContainer","show","progressBarContainer","hide","progressBar","input","head","reset","formatDate","date","state","month","year","hour","minutes","day","getDate","init","getMonth","message","removeClass","join","file","this","files","value","setVue","then","receipt","DAB","_file","e","style","width","progress","res","confirmedOn","err","getHours","getMinutes","setInputFile","verify","length","parseReceiptFile","woleet","tip","buttonBox","button","textZone","console","error","setTooltip","vue","icon","split","addClass","attr","resolve","reject","JSON","parse","target","result","_typeof","Error","domElement","_this","_target","Array","isArray","forEach","classList","remove","add","innerText","props","map","p","propName","val","setAttribute","removeAttribute","on","type","listener","addEventListener","capture","iniProps","hasOwnProperty","indexOf","appendChild","toDom","arguments","undefined","d","$","document","createElement","c","widget","log","body","reader","onloadend","widgets","getElementsByClassName","i","window"],"mappings":"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","file":"woleet-widget.min.js","sourcesContent":["(function (root) {\n    function Widget(hash, params) {\n\n        if (hash && typeof hash == 'object') {\n            params = hash;\n            hash = null;\n        }\n        else if (hash && typeof hash != 'string') throw new Error('Invalid parameter type');\n\n        const $ = function (domElement) {\n            let _target = domElement;\n            this.target = () => _target;\n\n            this.removeClass = (e) => {\n                Array.isArray(e) ? e.forEach(e => _target.classList.remove(e)) : _target.classList.remove(e);\n                return this;\n            };\n\n            this.addClass = (e) => {\n                Array.isArray(e) ? e.forEach(e => _target.classList.add(e)) : _target.classList.add(e);\n                return this;\n            };\n\n            this.text = (text, add) => {\n                add ? _target.innerText += text : _target.innerText = text;\n                return this;\n            };\n\n            this.show = () => this.removeClass('hidden');\n\n            this.hide = () => this.addClass('hidden');\n\n            this.style = (props) => {\n                if (Array.isArray(props)) {\n                    return props.map((p) => _target.style[p])\n                }\n                else if (typeof props == 'string') return _target.style[props];\n                else {\n                    for (let propName in props) {\n                        //noinspection JSUnfilteredForInLoop\n                        _target.style[propName] = props[propName];\n                    }\n                }\n            };\n\n            this.attr = (attr, val) => {\n                val ? _target.setAttribute(attr, val) : _target.removeAttribute(attr);\n                return this;\n            };\n\n            this.on = (type, listener, capture) => {\n                _target.addEventListener(type, listener, capture);\n                return this;\n            };\n\n            this.toDom = () => {\n                const iniProps = ['target', 'text', 'show', 'hide', 'toDom', 'addClass', 'removeClass', 'attr', 'on', 'style'];\n                let root = this.target();\n                for (let e in this) {\n                    if (!this.hasOwnProperty(e)) continue;\n                    if (iniProps.indexOf(e) != -1) continue;\n                    if (!e instanceof $) continue;\n                    try {\n                        root.appendChild(this[e].toDom())\n                    } catch (err) {\n                        console.log(e, err);\n                    }\n                }\n                return root;\n            }\n        };\n\n        const $touch = ((e = 'div', c) => {\n            let d = new $(document.createElement(e));\n            if (c) d.addClass(c);\n            return d;\n        });\n\n        const widget = $touch('div', 'widget');\n        const head = widget.head = $touch('div', 'head');\n        head.logo = $touch('div', 'woleet-logo');\n        head.reset = $touch('div', ['reset-button', 'clickable']).on('click', reset);\n        widget.body = $touch();\n        const content = widget.body.content = $touch();\n        content.icon = $touch('div', 'infoStatus');\n        content.info = $touch('div', 'infoBox');\n        content.info.message = $touch('div', 'messageBox');\n        content.info.message.buttonBox = $touch('div', 'buttonBox');\n        content.info.message.buttonBox.button = $touch('div', ['info', 'tooltip', 'clickable']);\n        content.info.message.buttonBox.button.tooltip = $touch('span', ['tooltiptext']);\n        content.info.message.textZone = $touch('div', 'text');\n        content.dropZone = $touch('div', 'dropZoneContainer');\n        content.dropZone.mainTextZone = $touch('div', 'text');\n        content.dropZone.subTextZone = $touch('div', ['text', 'little']);\n        content.dropZone.inputContainer = $touch('div', 'subContainer');\n        content.dropZone.inputContainer.progressBarContainer = $touch('div').hide();\n        const progressBar = content.dropZone.inputContainer.progressBarContainer.progressBar = $touch('div', 'progressBar');\n        content.dropZone.inputContainer.input = $touch('input', ['dropZone', 'clickable']).attr('type', 'file').on('change', setInputFile);\n\n        init();\n\n        if (hash) setInputFile({target: {files: [hash]}});\n\n        //CTRL\n\n        let state = 'initial';\n        let _file;\n\n        function init() {\n            content.dropZone.mainTextZone.text('Drop the file to verify');\n            content.dropZone.subTextZone.text('');\n            content.info.message.buttonBox.button.tooltip.text('');\n            content.dropZone.addClass('expanded').show();\n            content.info.removeClass(['reduced', 'expanded']).hide();\n            content.icon.removeClass(['validated', 'error']).hide();\n            content.dropZone.inputContainer.progressBarContainer.hide();\n            head.reset.hide();\n        }\n\n        /**\n         * @param {Date} date\n         */\n        function formatDate(date) {\n            let day, month, year, hour, minutes;\n\n            day = date.getDate();\n            month = date.getMonth();\n            year = date.getFullYear();\n            hour = date.getHours();\n            minutes = date.getMinutes();\n\n            return [day, month + 1, year].join('/') + ' ' + [hour, minutes].join(':');\n        }\n\n        function setInputFile() {\n            let file = this.files[0];\n            if (!file) return;\n            this.value = null; // Reset input\n            if (state == 'done') setVue();\n            if (state == 'needReceipt') {\n                setVue('pending');\n                parseReceiptFile(file).then(function (receipt) {\n                    woleet.verify.DAB(_file, receipt, (e) => {\n                        progressBar.style({width: e.progress * 100 + '%'});\n                    }).then(function (res) {\n                        setVue('woleet-ok', formatDate(res.confirmedOn));\n                        state = 'done';\n                    }, function (err) {\n                        setVue('error', err);\n                    })\n                }, function (err) {\n                    setVue('error', err);\n                });\n            }\n            else {\n                _file = file;\n                setVue('pending');\n                woleet.verify.WoleetDAB(file, (e) => {\n                    progressBar.style({width: e.progress * 100 + '%'});\n                }).then(function (res) {\n                    state = 'done';\n                    if (res.length) setVue('woleet-ok', formatDate(res[0].confirmedOn));\n                    else setVue('need-receipt', 'Drop its receipt');\n                }, function (err) {\n                    console.error(err);\n                    setVue('error', err);\n                })\n            }\n        }\n\n        function setTooltip(vue) {\n            let tip = content.info.message.buttonBox.button.tooltip;\n            let info = content.info.message.textZone;\n            switch (vue) {\n                case 'need-receipt':\n                    info.text('File unknown to Woleet');\n                    tip.text('The receipt cannot be retreived from Woleet: you must provide it to verify this file');\n                    break;\n                case 'target_hash_mismatch':\n                    info.text('The provided receipt is not meant for this file');\n                    tip.text('The receipt\\'s target_hash attribute doesn\\'t match the file hash');\n                    break;\n                case 'unable_to_parse_json':\n                    info.text('The provided receipt cannot be parsed');\n                    tip.text('The file you provided doesn\\'t look like a receipt');\n                    break;\n                case 'merkle_root_mismatch':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('The receipt\\'s merkle_root attribute does not match the proof result');\n                    break;\n                case 'non_sha256_target_proof_element':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('An attribute in the proof (parent or left or right) in not a SHA256 hash');\n                    break;\n                case 'invalid_parent_in_proof_element':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('A parent in the proof does not match SHA256(left+right).');\n                    break;\n                case 'invalid_receipt_format':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('The proof miss an attribute (parent or left or right).');\n                    break;\n                case 'invalid_target_proof':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('The receipt does not conform to the Chainpoint 1.x format');\n                    break;\n                case 'tx_not_found':\n                    info.text('Transaction not found');\n                    tip.text('The transaction targeted by the receipt cannot be found');\n                    break;\n                case 'error_while_getting_transaction':\n                    info.text('Cannot get transaction');\n                    tip.text('There was an error while getting the transaction (try again)');\n                    break;\n                default:\n                    info.text(vue);\n                    tip.text('Nothing to say');\n                    break;\n            }\n        }\n\n        function setVue(vue, message) {\n            switch (vue) {\n                case 'woleet-ok':\n                case 'receipt-ok':\n                    content.icon.show();\n                    let date = message.split(' ');\n                    content.dropZone.mainTextZone.text(date[0]);\n                    content.dropZone.subTextZone.text(date[1]);\n                    content.dropZone.removeClass('expanded');\n                    content.icon.addClass('validated');\n                    content.info.removeClass('reduced').hide();\n                    content.dropZone.inputContainer.progressBarContainer.hide();\n                    content.dropZone.attr('disabled', true);\n                    setTooltip('');\n                    break;\n                case 'need-receipt':\n                    content.dropZone.mainTextZone.text(message);\n                    content.dropZone.removeClass('expanded');\n                    content.info.message.textZone.text('need receipt');\n                    content.info.addClass('reduced').show();\n                    content.dropZone.inputContainer.progressBarContainer.hide();\n                    head.reset.show();\n                    setTooltip('need-receipt');\n                    state = 'needReceipt';\n                    break;\n                case 'receipt-ko':\n                case 'error':\n                    console.error(message);\n                    content.info.removeClass('reduced').addClass('expanded').show();\n                    content.dropZone.inputContainer.progressBarContainer.hide();\n                    content.icon.addClass('error').show();\n                    content.dropZone.removeClass('expanded').hide();\n                    head.reset.show();\n                    setTooltip(message.message);\n                    break;\n                case 'pending':\n                    content.info.hide();\n                    content.icon.hide();\n                    content.dropZone.mainTextZone.text('Hashing...');\n                    content.dropZone.inputContainer.progressBarContainer.show();\n                    setTooltip('');\n                    break;\n                case 'init':\n                default:\n                    init();\n                    break;\n            }\n        }\n\n        function parseReceiptFile(receipt) {\n            return new Promise(function (resolve, reject) {\n                let reader = new FileReader();\n                reader.onloadend = function (e) {\n                    try {\n                        resolve(JSON.parse(e.target.result));\n                    } catch (err) {\n                        reject(new Error('unable_to_parse_json'));\n                    }\n                };\n                reader.readAsText(receipt);\n            });\n        }\n\n        function reset() {\n            setVue('init');\n            _file = null;\n            state = 'initial'\n        }\n\n        return widget.toDom()\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        let widgets = document.getElementsByClassName(\"woleet-widget\");\n        for (let i = 0; i < widgets.length; i++) {\n            let e = widgets[i];\n            let hash = e.getAttribute(\"data-hash\");\n            e.appendChild(Widget(hash));\n        }\n    });\n\n    root.Widget = Widget;\n}(window));"]}