{"version":3,"sources":["woleet-widget.js"],"names":["root","Widget","hash","params","content","dropZone","subTextZone","$touch","inputContainer","text","progressBarContainer","progressBar","hide","icon","removeClass","init","head","reset","_file","date","day","month","year","hour","minutes","console","getDate","getHours","join","setInputFile","e","file","target","files","state","setVue","formatDate","then","receipt","DAB","style","width","progress","res","log","err","getFullYear","getMinutes","woleet","verify","WoleetDAB","parseReceiptFile","setTooltip","vue","info","message","buttonBox","button","tooltip","textZone","error","tip","show","split","mainTextZone","addClass","attr","reject","resolve","JSON","parse","result","_typeof","Error","domElement","_this","this","_target","Array","isArray","forEach","classList","remove","add","innerText","props","map","p","propName","val","setAttribute","removeAttribute","on","type","listener","addEventListener","capture","iniProps","hasOwnProperty","indexOf","appendChild","toDom","arguments","length","undefined","c","d","$","document","widget","logo","body","createElement","input","i","widgets","getAttribute","window"],"mappings":"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","file":"woleet-widget.min.js","sourcesContent":["(function (root) {\n    function Widget(hash, params) {\n\n        if (hash && typeof hash == 'object') {\n            params = hash;\n            hash = null;\n        }\n        else if (hash && typeof hash != 'string') throw new Error('Invalid parameter type');\n\n        const $ = function (domElement) {\n            let _target = domElement;\n            this.target = () => _target;\n\n            this.removeClass = (e) => {\n                Array.isArray(e) ? e.forEach(e => _target.classList.remove(e)) : _target.classList.remove(e);\n                return this;\n            };\n\n            this.addClass = (e) => {\n                Array.isArray(e) ? e.forEach(e => _target.classList.add(e)) : _target.classList.add(e);\n                return this;\n            };\n\n            this.text = (text, add) => {\n                add ? _target.innerText += text : _target.innerText = text;\n                return this;\n            };\n\n            this.show = () => this.removeClass('hidden');\n\n            this.hide = () => this.addClass('hidden');\n\n            this.style = (props) => {\n                if (Array.isArray(props)) {\n                    return props.map((p) => _target.style[p])\n                }\n                else if (typeof props == 'string') return _target.style[props];\n                else {\n                    for (let propName in props) {\n                        //noinspection JSUnfilteredForInLoop\n                        _target.style[propName] = props[propName];\n                    }\n                }\n            };\n\n            this.attr = (attr, val) => {\n                val ? _target.setAttribute(attr, val) : _target.removeAttribute(attr);\n                return this;\n            };\n\n            this.on = (type, listener, capture) => {\n                _target.addEventListener(type, listener, capture);\n                return this;\n            };\n\n            this.toDom = () => {\n                const iniProps = ['target', 'text', 'show', 'hide', 'toDom', 'addClass', 'removeClass', 'attr', 'on', 'style'];\n                let root = this.target();\n                for (let e in this) {\n                    if (!this.hasOwnProperty(e)) continue;\n                    if (iniProps.indexOf(e) != -1) continue;\n                    if (!e instanceof $) continue;\n                    try {\n                        root.appendChild(this[e].toDom())\n                    } catch (err) {\n                        console.log(e, err);\n                    }\n                }\n                return root;\n            }\n\n        };\n\n        const $touch = ((e = 'div', c) => {\n            let d = new $(document.createElement(e));\n            if (c) d.addClass(c);\n            return d;\n        });\n\n        const widget = $touch('div', 'widget');\n        const head = widget.head = $touch('div', 'head');\n        head.logo = $touch('div', 'woleet-logo');\n        head.reset = $touch('div', ['reset-button', 'clickable']).on('click', reset);\n        widget.body = $touch();\n        const content = widget.body.content = $touch();\n        content.icon = $touch('div', 'infoStatus');\n        content.info = $touch('div', 'infoBox');\n        content.info.message = $touch('div', 'messageBox');\n        content.info.message.buttonBox = $touch('div', 'buttonBox');\n        content.info.message.buttonBox.button = $touch('div', ['info', 'tooltip', 'clickable']);\n        content.info.message.buttonBox.button.tooltip = $touch('span', ['tooltiptext']);\n        content.info.message.textZone = $touch('div', 'text');\n        content.dropZone = $touch('div', 'dropZoneContainer');\n        content.dropZone.mainTextZone = $touch('div', 'text');\n        content.dropZone.subTextZone = $touch('div', ['text', 'little']);\n        content.dropZone.inputContainer = $touch('div', 'subContainer');\n        content.dropZone.inputContainer.progressBarContainer = $touch('div').hide();\n        const progressBar = content.dropZone.inputContainer.progressBarContainer.progressBar = $touch('div', 'progressBar');\n        content.dropZone.inputContainer.input = $touch('input', ['dropZone', 'clickable']).attr('type', 'file').on('change', setInputFile);\n\n        init();\n\n        if (hash) setInputFile({target: {files: [hash]}});\n\n        //CTRL\n\n        let state = 'initial';\n        let _file;\n\n        function init() {\n            console.log('init');\n            content.dropZone.mainTextZone.text('Drop the file to verify');\n            content.dropZone.subTextZone.text('');\n            content.info.message.buttonBox.button.tooltip.text('');\n            content.dropZone.addClass('expanded').show();\n            content.info.removeClass(['reduced', 'expanded']).hide();\n            content.icon.removeClass(['validated', 'error']).hide();\n            content.dropZone.inputContainer.progressBarContainer.hide();\n            head.reset.hide();\n        }\n\n        /**\n         * @param {Date} date\n         */\n        function formatDate(date) {\n            let day, month, year, hour, minutes;\n\n            day = date.getDate();\n            month = date.getMonth();\n            year = date.getFullYear();\n            hour = date.getHours();\n            minutes = date.getMinutes();\n\n            return [day, month + 1, year].join('/') + ' ' + [hour, minutes].join(':');\n        }\n\n        function setInputFile(e) {\n            let file = e.target.files[0];\n            if (!file) return;\n            if (state == 'done') setVue();\n            if (state == 'needReceipt') {\n                setVue('pending');\n                parseReceiptFile(file).then(function (receipt) {\n                    woleet.verify.DAB(_file, receipt, (e) => {\n                        progressBar.style({width: e.progress * 100 + '%'});\n                    }).then(function (res) {\n                        console.log(res);\n                        setVue('woleet-ok', formatDate(res.date));\n                        state = 'done';\n                    }, function (err) {\n                        setVue('error', err);\n                    })\n                }, function (err) {\n                    setVue('error', err);\n                });\n            }\n            else {\n                _file = file;\n                setVue('pending');\n                woleet.verify.WoleetDAB(file, (e) => {\n                    progressBar.style({width: e.progress * 100 + '%'});\n                }).then(function (res) {\n                    console.log(res);\n                    state = 'done';\n                    if (res.length) setVue('woleet-ok', formatDate(res[0].date));\n                    else setVue('need-receipt', 'Drop its receipt');\n                }, function (err) {\n                    console.error(err);\n                    setVue('error', err);\n                })\n            }\n        }\n\n        function setTooltip(vue) {\n            let tip = content.info.message.buttonBox.button.tooltip;\n            let info = content.info.message.textZone;\n            switch (vue) {\n                case 'need-receipt':\n                    info.text('File unknown to Woleet');\n                    tip.text('You must provide a receipt to verify this file');\n                    break;\n                case 'target_hash_mismatch':\n                    info.text('The provided receipt is not meant for this file');\n                    tip.text('The receipt doesn\\'t match the file');\n                    break;\n                case 'unable_to_parse_json':\n                    info.text('The provided receipt cannot be parsed');\n                    tip.text('The file you provided doesn\\'t look like a receipt');\n                    break;\n                case 'merkle_root_mismatch':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('The proof result does not match the receipt\\'s merkle_root attribute');\n                    break;\n                case 'non_sha256_target_proof_element':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('An attribute in proof (parent or left or right) in not a SHA256 hash.');\n                    break;\n                case 'invalid_parent_in_proof_element':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('Parent does not match the SHA256(left+right).');\n                    break;\n                case 'invalid_receipt_format':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('Missing attribute in the receipt\\'s proof (parent or left or right).');\n                    break;\n                case 'invalid_target_proof':\n                    info.text('The provided receipt seems corrupted');\n                    tip.text('The receipt does not match the Chainpoint 1.x format');\n                    break;\n                case 'tx_not_found':\n                    info.text('Transaction not found');\n                    tip.text('The transaction linked by the receipt cannot be found');\n                    break;\n                case 'error_while_getting_transaction':\n                    info.text('Cannot get transaction');\n                    tip.text('There was an error while getting the transaction (try again)');\n                    break;\n                default:\n                    info.text(vue);\n                    tip.text('Nothing to say');\n                    break;\n            }\n        }\n\n        function setVue(vue, message) {\n            switch (vue) {\n                case 'woleet-ok':\n                case 'receipt-ok':\n                    content.icon.show();\n                    let date = message.split(' ');\n                    content.dropZone.mainTextZone.text(date[0]);\n                    content.dropZone.subTextZone.text(date[1]);\n                    content.dropZone.removeClass('expanded');\n                    content.icon.addClass('validated');\n                    content.info.removeClass('reduced').hide();\n                    content.dropZone.inputContainer.progressBarContainer.hide();\n                    content.dropZone.attr('disabled', true);\n                    setTooltip('');\n                    break;\n                case 'need-receipt':\n                    content.dropZone.mainTextZone.text(message);\n                    content.dropZone.removeClass('expanded');\n                    content.info.message.textZone.text('need receipt');\n                    content.info.addClass('reduced').show();\n                    content.dropZone.inputContainer.progressBarContainer.hide();\n                    head.reset.show();\n                    setTooltip('need-receipt');\n                    state = 'needReceipt';\n                    break;\n                case 'receipt-ko':\n                case 'error':\n                    console.error(message);\n                    content.info.removeClass('reduced').addClass('expanded').show();\n                    content.dropZone.inputContainer.progressBarContainer.hide();\n                    content.icon.addClass('error').show();\n                    content.dropZone.removeClass('expanded').hide();\n                    head.reset.show();\n                    setTooltip(message.message);\n                    break;\n                case 'pending':\n                    content.info.hide();\n                    content.icon.hide();\n                    content.dropZone.mainTextZone.text('pending...');\n                    content.dropZone.inputContainer.progressBarContainer.show();\n                    setTooltip('');\n                    break;\n                case 'init':\n                default:\n                    init();\n                    break;\n            }\n        }\n\n        function parseReceiptFile(receipt) {\n            return new Promise(function (resolve, reject) {\n                let reader = new FileReader();\n                reader.onloadend = function (e) {\n                    try {\n                        resolve(JSON.parse(e.target.result));\n                    } catch (err) {\n                        reject(new Error('unable_to_parse_json'));\n                    }\n                };\n                reader.readAsText(receipt);\n            });\n        }\n\n        function reset() {\n            setVue('init');\n            _file = null;\n            state = 'initial'\n        }\n\n        return widget.toDom()\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n        let widgets = document.getElementsByClassName(\"woleet-widget\");\n        for (let i = 0; i < widgets.length; i++) {\n            let e = widgets[i];\n            let hash = e.getAttribute(\"data-hash\");\n            e.appendChild(Widget(hash));\n        }\n    });\n\n    root.Widget = Widget;\n}(window));"]}